<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News - EDU-LEAGUE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" href="edulogo.jpg" type="image/jpeg">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <nav class="bg-white border-b sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16 items-center">
                <a href="index.html" class="flex items-center gap-2">
                    <img src="edulogo.jpg" class="h-8 w-8 rounded-full border border-gray-200">
                    <span class="font-black text-2xl text-gray-900">EDU-<span class="text-green-600">LEAGUE</span></span>
                </a>
                <div class="flex space-x-4">
                    <a href="index.html" class="text-gray-500 font-bold">Registration</a>
                    <a href="news.html" class="text-green-600 font-bold border-b-2 border-green-600">News</a>
                </div>
            </div>
        </div>
    </nav>

    <main class="flex-grow">
        
        <div class="bg-gray-900 text-white py-8">
            <div class="max-w-4xl mx-auto px-4">
                <h2 class="text-center text-green-500 font-bold text-xs uppercase tracking-widest mb-4">Official Matchday Fixture</h2>
                
                <div class="bg-white/10 rounded-xl p-6 backdrop-blur-sm border border-white/20 flex items-center justify-between">
                    <div class="flex flex-col items-center w-1/3">
                        <img id="teamA_img" src="edulogo.jpg" class="w-16 h-16 md:w-24 md:h-24 object-contain mb-2 bg-white rounded-full p-1">
                        <h3 id="teamA_name" class="font-bold text-lg md:text-xl text-center">Loading</h3>
                    </div>

                    <div class="text-center w-1/3">
                        <div class="text-3xl md:text-5xl font-black text-white mb-1">VS</div>
                        <div class="text-xs md:text-sm text-gray-300 font-mono" id="match_details">...</div>
                        <span class="inline-block bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded mt-2">UPCOMING</span>
                    </div>

                    <div class="flex flex-col items-center w-1/3">
                        <img id="teamB_img" src="edulogo.jpg" class="w-16 h-16 md:w-24 md:h-24 object-contain mb-2 bg-white rounded-full p-1">
                        <h3 id="teamB_name" class="font-bold text-lg md:text-xl text-center">Loading</h3>
                    </div>
                </div>
            </div>
        </div>

        <div class="max-w-6xl mx-auto px-4 py-12">
            <h3 class="font-bold text-2xl text-gray-800 mb-6 border-l-4 border-green-600 pl-4">Latest Updates</h3>
            <div id="loading" class="text-center py-10"><i class="fa-solid fa-circle-notch fa-spin text-3xl text-green-600"></i></div>
            <div id="news-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 hidden"></div>
        </div>

    </main>

    <div id="newsModal" class="hidden"></div> 

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, query, orderBy, onSnapshot, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // --- PASTE FIREBASE CONFIG HERE ---
        const firebaseConfig = {
           apiKey: "AIzaSyDtxFsLYoe0NYlZRWiXgEM90IYKMwx7K8s",
           authDomain: "sonic-verbena-239117.firebaseapp.com",
           projectId: "sonic-verbena-239117",
           storageBucket: "sonic-verbena-239117.firebasestorage.app",
           messagingSenderId: "652544574249",
           appId: "1:652544574249:web:6ff33771307e892e7f6d38",
           measurementId: "G-TD780JGNED"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        signInAnonymously(auth);

        // --- LOAD FIXTURE WITH LOGOS ---
        onSnapshot(doc(db, "app_content", "current_fixture"), (doc) => {
            if(doc.exists()) {
                const d = doc.data();
                document.getElementById('teamA_name').textContent = d.teamA;
                document.getElementById('teamB_name').textContent = d.teamB;
                document.getElementById('match_details').textContent = `${d.date} • ${d.time} • ${d.venue}`;
                
                // Set Logos (Fallback to edulogo if missing)
                if(d.teamALogo) document.getElementById('teamA_img').src = d.teamALogo;
                if(d.teamBLogo) document.getElementById('teamB_img').src = d.teamBLogo;
            }
        });

        // --- LOAD NEWS ---
        const q = query(collection(db, "news_posts"), orderBy("timestamp", "desc"));
        onSnapshot(q, (snapshot) => {
            const grid = document.getElementById('news-grid');
            document.getElementById('loading').classList.add('hidden');
            grid.classList.remove('hidden');
            grid.innerHTML = '';

            snapshot.forEach(doc => {
                const data = doc.data();
                const imgUrl = data.imageUrl || 'edulogo.jpg'; // Fallback
                const dateStr = data.timestamp ? data.timestamp.toDate().toLocaleDateString() : 'Recent';

                grid.innerHTML += `
                    <div class="bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-lg transition">
                        <img src="${imgUrl}" class="h-48 w-full object-cover">
                        <div class="p-6">
                            <span class="text-xs font-bold text-green-600 uppercase">${dateStr}</span>
                            <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">${data.title}</h3>
                            <p class="text-gray-600 text-sm line-clamp-3">${data.content}</p>
                        </div>
                    </div>
                `;
            });
        });
    </script>
</body>
</html>