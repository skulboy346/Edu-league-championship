<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal - EDU-LEAGUE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" href="edulogo.jpg" type="image/jpeg">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .active-tab { background-color: #16a34a; color: white; border-color: #16a34a; }
        .inactive-tab { background-color: white; color: #4b5563; border-color: #e5e7eb; }
        .sub-active { background-color: #4c1d95; color: white; border: 1px solid #4c1d95; }
        .sub-inactive { background-color: white; color: #374151; border: 1px solid #e5e7eb; }
        .stat-input { width: 100%; text-align: center; border: 1px solid #e5e7eb; padding: 4px; border-radius: 4px; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <nav class="bg-white border-b sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 flex justify-between h-16 items-center">
            <div class="flex items-center gap-2"><img src="edulogo.jpg" class="h-8 w-8 rounded-full border"><span class="font-black text-xl text-gray-900">EDU-ADMIN</span></div>
            <button onclick="logout()" id="logoutBtn" class="hidden text-sm text-red-600 font-bold hover:text-red-800">Log Out</button>
        </div>
    </nav>

    <main class="flex-grow py-10 px-4">
        <div id="login-section" class="max-w-md mx-auto bg-white rounded-xl shadow-lg p-8">
            <h2 class="text-2xl font-bold text-center mb-6">Secure Access</h2>
            <input type="password" id="adminPin" class="w-full border p-3 rounded-lg text-center text-2xl tracking-widest mb-4" placeholder="****">
            <button onclick="login()" id="loginBtn" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700">Login</button>
            <p id="loginError" class="text-red-500 text-center text-sm hidden font-bold mt-2">Incorrect Password</p>
        </div>

        <div id="dashboard-section" class="max-w-7xl mx-auto hidden">
            <div class="grid grid-cols-4 md:grid-cols-7 gap-2 mb-6 overflow-x-auto">
                <button onclick="switchTab('registrations')" id="btn-registrations" class="active-tab py-2 px-2 text-xs font-bold rounded border">Teams</button>
                <button onclick="switchTab('news')" id="btn-news" class="inactive-tab py-2 px-2 text-xs font-bold rounded border">News</button>
                <button onclick="switchTab('widget')" id="btn-widget" class="inactive-tab py-2 px-2 text-xs font-bold rounded border">Spotlight</button>
                <button onclick="switchTab('schedule')" id="btn-schedule" class="inactive-tab py-2 px-2 text-xs font-bold rounded border">Schedule</button>
                <button onclick="switchTab('league')" id="btn-league" class="inactive-tab py-2 px-2 text-xs font-bold rounded border">Tables</button>
                <button onclick="switchTab('stats')" id="btn-stats" class="inactive-tab py-2 px-2 text-xs font-bold rounded border">Stats</button>
                <button onclick="switchTab('polls')" id="btn-polls" class="inactive-tab py-2 px-2 text-xs font-bold rounded border bg-yellow-50 text-yellow-700">Fan Zone</button>
            </div>

            <div id="tab-registrations" class="bg-white rounded-xl shadow p-6 hidden">
                <div class="bg-blue-50 p-4 rounded mb-6">
                    <h3 class="font-bold text-blue-900 mb-2">Upload Team Badge</h3>
                    <div class="grid grid-cols-3 gap-2">
                        <select id="logoDeptSelect" class="border p-2 rounded text-xs font-bold"></select>
                        <select id="logoLevelSelect" class="border p-2 rounded text-xs">
                            <option value="Finalist">Finalist</option>
                            <option value="Penultimate">Penultimate</option>
                            <option value="Sophomore">Sophomore</option>
                            <option value="Female">Female League</option>
                        </select>
                        <input type="file" id="teamLogoFile" class="text-xs">
                    </div>
                    <button onclick="uploadTeamLogo()" id="uploadLogoBtn" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded text-xs font-bold">Save Badge</button>
                </div>
                <div id="registrations-list" class="max-h-64 overflow-y-auto space-y-2"></div>
            </div>

            <div id="tab-news" class="bg-white rounded-xl shadow p-6 hidden">
                <h3 class="font-bold mb-4">Post News (Video/Photo)</h3>
                <input id="newsTitle" class="w-full border p-2 rounded mb-2" placeholder="Headline">
                <input id="newsFile" type="file" accept="image/*,video/*" class="w-full text-xs mb-2">
                <div id="progressArea" class="hidden w-full bg-gray-200 h-1 mb-2"><div id="progressBar" class="bg-green-600 h-1" style="width:0%"></div></div>
                <textarea id="newsContent" class="w-full border p-2 rounded h-24 mb-2" placeholder="Story..."></textarea>
                <button onclick="postNews()" id="publishBtn" class="bg-green-600 text-white w-full py-2 rounded font-bold">Publish</button>
                <div id="admin-news-list" class="mt-6 space-y-2"></div>
            </div>

            <div id="tab-widget" class="bg-white rounded-xl shadow p-6 hidden">
                <h3 class="font-bold mb-4">Homepage Spotlight</h3>
                <div id="widget-matches-container" class="space-y-2 mb-4"></div>
                <button onclick="addWidgetMatchRow()" class="bg-gray-200 px-4 py-2 rounded text-xs font-bold">+ Add Game</button>
                <button onclick="saveSpotlightWidget()" class="bg-black text-white px-4 py-2 rounded text-xs font-bold ml-2">Publish</button>
            </div>

            <div id="tab-schedule" class="bg-white rounded-xl shadow p-6 hidden">
                <div class="flex justify-between mb-4">
                    <h3 class="font-bold">Schedule</h3>
                    <select id="matchDaySelect" onchange="loadSchedule()" class="border p-1 rounded text-xs font-bold">
                        <option>Matchday 1</option><option>Matchday 2</option><option>Matchday 3</option><option>Matchday 4</option><option>Matchday 5</option><option>Matchday 6</option><option>Matchday 7</option><option>Semi-Finals</option><option>Finals</option>
                    </select>
                </div>
                <div id="schedule-container" class="space-y-2 mb-4"></div>
                <button onclick="addMatchInput()" class="bg-gray-200 px-3 py-1 rounded text-xs font-bold">+ Row</button>
                <button onclick="saveSchedule()" class="bg-green-600 text-white px-3 py-1 rounded text-xs font-bold">Save</button>
            </div>

            <div id="tab-league" class="bg-white rounded-xl shadow p-6 hidden">
                <div class="flex justify-between items-center mb-6 bg-gray-50 p-4 rounded-xl border">
                    <div class="text-center">
                        <img id="division-logo-display" src="Finalist.png" class="w-12 h-12 object-contain mx-auto" onerror="this.src='edulogo.jpg'">
                        <p id="division-label" class="text-[10px] font-bold text-gray-500 uppercase mt-1">Finalist</p>
                    </div>
                    <div class="flex gap-1 overflow-x-auto pb-2">
                        <button onclick="changeTableLevel('Finalist')" id="lvl-Finalist" class="sub-active px-2 py-1 rounded text-xs">Finalist</button>
                        <button onclick="changeTableLevel('Penultimate')" id="lvl-Penultimate" class="sub-inactive px-2 py-1 rounded text-xs">Penultimate</button>
                        <button onclick="changeTableLevel('Sophomore')" id="lvl-Sophomore" class="sub-inactive px-2 py-1 rounded text-xs">Sophomore</button>
                        <button onclick="changeTableLevel('Female')" id="lvl-Female" class="sub-inactive px-2 py-1 rounded text-xs bg-pink-100 text-pink-700 border-pink-200">Female</button>
                    </div>
                </div>
                <table class="w-full text-xs"><thead><tr class="bg-gray-100"><th class="p-2 text-left">Dept</th><th>MP</th><th>W</th><th>D</th><th>L</th><th>GD</th><th>Pts</th></tr></thead><tbody id="table-editor-body"></tbody></table>
                <button onclick="saveTable()" class="w-full bg-purple-700 text-white py-2 mt-4 rounded font-bold">Save Table</button>
            </div>

            <div id="tab-stats" class="bg-white rounded-xl shadow p-6 hidden">
                <h3 class="font-bold mb-4">Player Stats</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <select id="statsTeamSelect" onchange="loadPlayersForStats()" class="w-full border p-2 rounded text-xs font-bold mb-2"></select>
                        <select id="statsPlayerSelect" onchange="fetchCurrentStats()" class="w-full border p-2 rounded text-xs font-bold mb-2"></select>
                        <div class="grid grid-cols-2 gap-2 mb-2">
                            <input type="number" id="playerGoals" class="border p-2 text-center" placeholder="Goals">
                            <input type="number" id="playerAssists" class="border p-2 text-center" placeholder="Assists">
                        </div>
                        <div class="grid grid-cols-3 gap-2 mb-2">
                            <input type="number" id="playerYellow" class="border p-2 text-center bg-yellow-50" placeholder="Yel">
                            <input type="number" id="playerRed" class="border p-2 text-center bg-red-50" placeholder="Red">
                            <input type="number" id="playerSaves" class="border p-2 text-center bg-purple-50" placeholder="Saves">
                        </div>
                        <button onclick="savePlayerStats()" class="w-full bg-black text-white py-2 rounded font-bold">Update Stats</button>
                    </div>
                    <div>
                        <div class="flex flex-wrap gap-1 mb-2">
                            <button onclick="loadLeaderboard('goals')" class="px-2 py-1 bg-green-100 text-xs font-bold rounded">Goals</button>
                            <button onclick="loadLeaderboard('assists')" class="px-2 py-1 bg-blue-100 text-xs font-bold rounded">Assists</button>
                            <button onclick="loadLeaderboard('saves')" class="px-2 py-1 bg-purple-100 text-xs font-bold rounded">Saves</button>
                        </div>
                        <div id="statsLeaderboard" class="border rounded p-2 text-xs">Select category...</div>
                    </div>
                </div>
            </div>

            <div id="tab-polls" class="bg-white rounded-xl shadow p-6 hidden">
                <h3 class="font-bold text-gray-900 mb-4">Fan Zone Manager</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <input id="pollQuestion" class="w-full border p-3 rounded mb-2" placeholder="Question (e.g. Who wins?)">
                        <input id="pollOpt1" class="w-full border p-2 rounded mb-2" placeholder="Option 1">
                        <input id="pollOpt2" class="w-full border p-2 rounded mb-4" placeholder="Option 2">
                        <button onclick="publishPoll()" class="w-full bg-purple-600 text-white font-bold py-2 rounded">Publish Poll</button>
                    </div>
                    <div class="bg-gray-50 p-4 rounded border">
                        <h4 class="font-bold text-gray-700 mb-2">Current Poll</h4>
                        <div id="activePollDisplay" class="text-sm text-gray-600 mb-4">Loading...</div>
                        <button onclick="deletePoll()" class="text-red-600 text-xs font-bold underline">End Poll</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, addDoc, collection, serverTimestamp, query, orderBy, getDocs, onSnapshot, deleteDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyDtxFsLYoe0NYlZRWiXgEM90IYKMwx7K8s", authDomain: "sonic-verbena-239117.firebaseapp.com", projectId: "sonic-verbena-239117", storageBucket: "sonic-verbena-239117.appspot.com", messagingSenderId: "652544574249", appId: "1:652544574249:web:6ff33771307e892e7f6d38", measurementId: "G-TD780JGNED" };
        const CLOUD_NAME = "dxdxgrvvb"; const UPLOAD_PRESET = "edu_league"; 

        const app = initializeApp(firebaseConfig); const db = getFirestore(app); const auth = getAuth(app);
        const DEPARTMENTS = ["Adult Edu", "Art Edu", "Edu Found", "Edu Mgt", "HKHE", "Sci Edu", "Soc Sci Edu", "TVESA"];
        const ADMIN_PASS = "EDUADMIN2025"; let currentTableLevel = "Finalist"; 

        window.login = async () => {
            if(document.getElementById('adminPin').value === ADMIN_PASS) {
                document.getElementById('loginBtn').textContent = "Connecting...";
                await signInAnonymously(auth);
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('dashboard-section').classList.remove('hidden');
                document.getElementById('logoutBtn').classList.remove('hidden');
                initDashboard();
            } else { document.getElementById('loginError').classList.remove('hidden'); }
        }
        window.logout = () => window.location.reload();
        window.switchTab = (t) => { ['registrations','news','widget','schedule','league','stats','polls'].forEach(tab=>{ const el=document.getElementById(`tab-${tab}`); const btn=document.getElementById(`btn-${tab}`); if(el){ if(tab===t){el.classList.remove('hidden');btn.classList.replace('inactive-tab','active-tab');}else{el.classList.add('hidden');btn.classList.replace('active-tab','inactive-tab');}}}); }

        function initDashboard() { loadRegistrations(); loadNewsHistory(); loadTableEditor(); populateTeamSelects(); loadSchedule(); loadTeamsForStatsDropdown(); loadLeaderboard('goals'); addWidgetMatchRow(); initPolls(); }

        async function uploadToCloudinary(file) {
            const formData = new FormData(); formData.append("file", file); formData.append("upload_preset", UPLOAD_PRESET);
            const response = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/auto/upload`, { method: "POST", body: formData });
            const data = await response.json(); return data.secure_url;
        }

        window.postNews = async () => {
            const btn = document.getElementById('publishBtn'); btn.disabled=true; btn.textContent="Uploading...";
            try {
                const file = document.getElementById('newsFile').files[0]; let imageUrl = "";
                if(file) { document.getElementById('progressArea').classList.remove('hidden'); imageUrl = await uploadToCloudinary(file); }
                await addDoc(collection(db, "news_posts"), { title: document.getElementById('newsTitle').value, content: document.getElementById('newsContent').value, imageUrl, timestamp: serverTimestamp() });
                alert("Published!"); document.getElementById('newsTitle').value=""; document.getElementById('newsContent').value="";
            } catch(e) { alert(e.message); }
            btn.disabled=false; btn.textContent="Publish";
        }

        window.uploadTeamLogo = async () => {
            const file = document.getElementById('teamLogoFile').files[0]; if(!file) return alert("No file");
            document.getElementById('uploadLogoBtn').textContent = "Uploading...";
            const url = await uploadToCloudinary(file);
            await setDoc(doc(db, "team_assets", document.getElementById('logoDeptSelect').value), { logoUrl: url, levelUpdated: document.getElementById('logoLevelSelect').value }, { merge: true });
            alert("Badge Saved!"); document.getElementById('uploadLogoBtn').textContent = "Save Badge";
        }

        window.publishPoll = async () => { await setDoc(doc(db, "app_content", "active_poll"), { question: document.getElementById('pollQuestion').value, opt1: document.getElementById('pollOpt1').value, opt2: document.getElementById('pollOpt2').value, votes1: 0, votes2: 0, timestamp: serverTimestamp() }); alert("Poll Live!"); }
        window.deletePoll = async () => { if(confirm("End?")) await deleteDoc(doc(db, "app_content", "active_poll")); }
        function initPolls() { onSnapshot(doc(db, "app_content", "active_poll"), d => { const el=document.getElementById('activePollDisplay'); if(d.exists()) { const p=d.data(); el.innerHTML=`<b>${p.question}</b><br>${p.opt1}: ${p.votes1}<br>${p.opt2}: ${p.votes2}`; } else el.innerHTML="No poll."; }); }

        function populateTeamSelects() { const ops = DEPARTMENTS.map(d=>`<option>${d}</option>`).join(''); document.querySelectorAll('#logoDeptSelect, .w-teamA, .w-teamB').forEach(s=>s.innerHTML+=ops); }
        window.addWidgetMatchRow = (tA='',tB='',d='',t='',v='') => { const div=document.createElement('div'); div.className="grid grid-cols-6 gap-2 mb-2 widget-row"; div.innerHTML=`<select class="w-teamA col-span-2 border p-1 rounded text-xs"><option>Home</option>${DEPARTMENTS.map(o=>`<option ${o===tA?'selected':''}>${o}</option>`)}</select><select class="w-teamB col-span-2 border p-1 rounded text-xs"><option>Away</option>${DEPARTMENTS.map(o=>`<option ${o===tB?'selected':''}>${o}</option>`)}</select><input class="w-time col-span-1 border p-1 rounded text-xs" value="${t}" placeholder="Time"><button onclick="this.parentElement.remove()" class="text-red-500">X</button><div class="col-span-6 grid grid-cols-2 gap-1"><input class="w-date border p-1 text-xs" value="${d}" placeholder="Date"><input class="w-venue border p-1 text-xs" value="${v}" placeholder="Venue"></div>`; document.getElementById('widget-matches-container').appendChild(div); }
        window.saveSpotlightWidget = async () => { const m=[]; document.querySelectorAll('.widget-row').forEach(r=>{ const tA=r.querySelector('.w-teamA').value; const tB=r.querySelector('.w-teamB').value; if(tA!='Home'){ m.push({teamA:tA, teamB:tB, date:r.querySelector('.w-date').value, time:r.querySelector('.w-time').value, venue:r.querySelector('.w-venue').value}); } }); await setDoc(doc(db, "app_content", "current_fixture"), {matches:m}); alert("Widget Saved"); }
        window.loadRegistrations = async () => { const s = await getDocs(query(collection(db, "registrations"), orderBy("registeredAt", "desc"))); document.getElementById('registrations-list').innerHTML = s.docs.map(d=>`<div class="p-2 border bg-gray-50 text-xs flex justify-between"><b>${d.data().department}</b> <span>${d.data().level}</span></div>`).join(''); }
        function loadNewsHistory() { onSnapshot(query(collection(db, "news_posts"), orderBy("timestamp", "desc")), s => document.getElementById('admin-news-list').innerHTML = s.docs.map(d=>`<div class="flex justify-between p-2 border text-xs"><span>${d.data().title}</span><button onclick="deletePost('${d.id}')" class="text-red-500">Del</button></div>`).join('')); }
        window.deletePost = async (id) => deleteDoc(doc(db, "news_posts", id));
        window.addMatchInput = (tA='',tB='',t='',r='') => { document.getElementById('schedule-container').innerHTML += `<div class="grid grid-cols-4 gap-1 mb-1 match-row"><input class="s-teamA border p-1 text-xs" value="${tA}"><input class="s-teamB border p-1 text-xs" value="${tB}"><input class="s-time border p-1 text-xs" value="${t}"><input class="s-res border p-1 text-xs" value="${r}"></div>`; }
        window.loadSchedule = async () => { const s = await getDoc(doc(db, "schedules", "schedule_"+document.getElementById('matchDaySelect').value.replace(/\s+/g, '_').toLowerCase())); document.getElementById('schedule-container').innerHTML=''; if(s.exists()&&s.data().matches) s.data().matches.forEach(m=>window.addMatchInput(m.teamA, m.teamB, m.time, m.result)); else window.addMatchInput(); }
        window.saveSchedule = async () => { const m=[]; document.querySelectorAll('.match-row').forEach(r=>m.push({teamA:r.querySelector('.s-teamA').value, teamB:r.querySelector('.s-teamB').value, time:r.querySelector('.s-time').value, result:r.querySelector('.s-res').value})); await setDoc(doc(db, "schedules", "schedule_"+document.getElementById('matchDaySelect').value.replace(/\s+/g, '_').toLowerCase()), {matches:m}); alert("Saved"); }
        window.changeTableLevel = (l) => { 
            currentTableLevel=l; 
            const logoMap = {'Finalist':'Finalist.png','Penultimate':'Penultimate.png','Sophomore':'Sophomore.png','Female':'Edu-Female.png'};
            const img=document.getElementById('division-logo-display'); if(img) img.src=logoMap[l]||'edulogo.jpg';
            document.getElementById('division-label').textContent=l;
            ['Finalist','Penultimate','Sophomore','Female'].forEach(t=>{ const b=document.getElementById('lvl-'+t); if(t===l){b.classList.add('sub-active');b.classList.remove('sub-inactive');}else{b.classList.remove('sub-active');b.classList.add('sub-inactive');}});
            loadTableEditor(); 
        }
        async function loadTableEditor() { const s = await getDoc(doc(db, "app_content", `league_table_${currentTableLevel.toLowerCase()}`)); let d=s.exists()?s.data():{}; document.getElementById('table-editor-body').innerHTML = DEPARTMENTS.map(dept => { const v=d[dept]||{mp:0,w:0,d:0,l:0,gd:0,pts:0}; return `<tr><td>${dept}</td>${Object.keys(v).map(k=>`<td><input id="${dept}-${k}" value="${v[k]}" class="stat-input w-8"></td>`).join('')}</tr>`; }).join(''); }
        window.saveTable = async () => { const d={}; DEPARTMENTS.forEach(dept=>{ d[dept]={mp:parseInt(document.getElementById(`${dept}-mp`).value)||0, w:parseInt(document.getElementById(`${dept}-w`).value)||0, d:parseInt(document.getElementById(`${dept}-d`).value)||0, l:parseInt(document.getElementById(`${dept}-l`).value)||0, gd:parseInt(document.getElementById(`${dept}-gd`).value)||0, pts:parseInt(document.getElementById(`${dept}-pts`).value)||0}; }); await setDoc(doc(db, "app_content", `league_table_${currentTableLevel.toLowerCase()}`), d); alert("Table Saved"); }
        window.loadTeamsForStatsDropdown = async () => { const s = await getDocs(query(collection(db, "registrations"))); document.getElementById('statsTeamSelect').innerHTML = '<option>Select Team</option>' + s.docs.map(d=>`<option value="${d.id}">${d.data().department} (${d.data().level})</option>`).join(''); }
        window.loadPlayersForStats = async () => { const id = document.getElementById('statsTeamSelect').value; if(!id)return; const s = await getDoc(doc(db, "registrations", id)); if(s.exists() && s.data().players) document.getElementById('statsPlayerSelect').innerHTML = s.data().players.map(p=>`<option value="${p.name}">${p.name}</option>`).join(''); }
        window.fetchCurrentStats = async () => { const p = document.getElementById('statsPlayerSelect').value; const t = document.getElementById('statsTeamSelect').selectedOptions[0].text; if(!p)return; const s = await getDoc(doc(db, "player_stats", (t+p).replace(/\s/g,'').toLowerCase())); const d = s.exists()?s.data():{}; ['Goals','Assists','Yellow','Red','Saves'].forEach(k=>document.getElementById(`player${k}`).value = d[k.toLowerCase()]||(k=='Yellow'?d.yellowCards:k=='Red'?d.redCards:0)); }
        window.savePlayerStats = async () => { const p=document.getElementById('statsPlayerSelect').value; const t=document.getElementById('statsTeamSelect').selectedOptions[0].text; if(!p)return; await setDoc(doc(db, "player_stats", (t+p).replace(/\s/g,'').toLowerCase()), { name:p, team:t, goals:parseInt(document.getElementById('playerGoals').value)||0, assists:parseInt(document.getElementById('playerAssists').value)||0, yellowCards:parseInt(document.getElementById('playerYellow').value)||0, redCards:parseInt(document.getElementById('playerRed').value)||0, saves:parseInt(document.getElementById('playerSaves').value)||0 }); alert("Stats Saved"); }
        window.loadLeaderboard = async (t) => { const s = await getDocs(query(collection(db, "player_stats"), orderBy(t, "desc"))); document.getElementById('statsLeaderboard').innerHTML = s.docs.map(d=>`<div class="flex justify-between border-b p-1"><span>${d.data().name} (${d.data().team})</span><b>${d.data()[t]}</b></div>`).join(''); }
    </script>
</body>
</html>